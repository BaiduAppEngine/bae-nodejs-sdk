
var mc = require('./index.js');

var fs = require('fs');

function testPack2Json(filename) {
    console.log('-------- pack --> json test begin, filename = ' + filename);
    var income_data = fs.readFileSync(filename);
    var json_obj = mc.pack2json(income_data);
    console.log('++++++++ pack --> json test done, json_obj = ' + JSON.stringify(json_obj) + '\n');
}

function testJson2Pack(filename) {
    console.log('-------- json --> pack test begin, filename = ' + filename);
    var mcpack_json = {"segment_id":2, "distribution_key":"testmcpack"};
    var buf = mc.json2pack(mcpack_json);
    fs.writeFileSync(filename, buf);
    console.log('++++++++ json --> pack test done\n');
}

testPack2Json('./mcpack.log');
testJson2Pack('./newpack.txt');
testPack2Json('./newpack.txt');
